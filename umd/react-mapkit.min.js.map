{"version":3,"sources":["webpack://ReactMapkit/webpack/universalModuleDefinition","webpack://ReactMapkit/webpack/bootstrap","webpack://ReactMapkit/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://ReactMapkit/./node_modules/little-loader/lib/little-loader.js","webpack://ReactMapkit/./src/ErrorBoundry.js","webpack://ReactMapkit/./src/MapKit.js","webpack://ReactMapkit/./src/Marker.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","pendingScripts","scriptCounter","_addScript","script","firstScript","document","getElementsByTagName","parentNode","insertBefore","src","callback","context","setup","err","_cleanup","createElement","done","_finish","_error","Error","readyState","onload","onerror","async","charset","id","isReady","loaded","complete","inserted","onreadystatechange","firstState","children","state","hasError","componentDidCatch","this","setState","render","external_root_React_commonjs2_react_commonjs_react_amd_react_","props","errorText","MapKit_MapKitContext","external_root_React_commonjs2_react_commonjs_react_amd_react_default","a","createContext","src_MapKit","MapKit","MapKit_classCallCheck","_this","MapKit_possibleConstructorReturn","_Component","MapKit_initialiseProps","mapRef","createRef","componentDidMount","_this2","little_loader_default","initMap","shouldComponentUpdate","nextProps","mapKitIsReady","updateMapProps","componentWillUnmount","map","destroy","_props","tokenOrCallback","mapType","padding","showsCompass","showsMapTypeControl","showsZoomControl","showsUserLocationControl","showsPointsOfInterest","showsScale","tintColor","colorScheme","defaultCenter","defaultSpan","defaultMapRect","defaultRotation","animateViewChange","animateRotationChange","isRotationEnabled","isScrollEnabled","isZoomEnabled","showsUserLocation","tracksUserLocation","otherProps","regionChangeStartEvent","selectEvent","mapState","MapKit_objectWithoutProperties","MapKit_extends","ref","Provider","setRotation","setCenter","defaultProps","isCallback","includes","mapkit","init","authorizationCallback","fetch","then","res","text","_this3","current","Map","rotation","addEventListener","event","visibleMapRect","createMapRect","e","console","warn","message","buildRegion","center","span","mapCenter","createCoordinate","mapSpan","createCoordinateSpan","setRegionAnimated","createCoordinateRegion","setCenterAnimated","createPadding","Padding","top","right","bottom","left","latitude","longitude","Coordinate","latitudeDelta","longitudeDelta","CoordinateSpan","CoordinateRegion","createMapPoint","x","y","MapPoint","width","height","MapRect","setRotationAnimated","_ref","lat","lng","setRegion","Marker_Marker","Marker","Marker_classCallCheck","Marker_possibleConstructorReturn","Marker_initialiseProps","markerProps","getMarkerConstructionProps","marker","MarkerAnnotation","addAnnotation","coordinate","keys","forEach","key","Marker_objectWithoutProperties","src_Marker","Consumer","Marker_extends"],"mappings":"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","file":"react-mapkit.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactMapkit\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactMapkit\"] = factory(root[\"React\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/**\n * Script loading is difficult thanks to IE. We need callbacks to fire\n * immediately following the script's execution, with no other scripts\n * running in between. If other scripts on the page are able to run\n * between our script and its callback, bad things can happen, such as\n * `jQuery.noConflict` not being called in time, resulting in plugins\n * latching onto our version of jQuery, etc.\n *\n * For IE<10 we use a relatively well-documented \"preloading\" strategy,\n * which ensures that the script is ready to execute *before* appending\n * it to the DOM. That way when it is finally appended, it is\n * executed immediately.\n *\n * References:\n * - http://www.html5rocks.com/en/tutorials/speed/script-loading/\n * - http://blog.getify.com/ie11-please-bring-real-script-preloading-back/\n * - https://github.com/jrburke/requirejs/issues/526\n * - https://connect.microsoft.com/IE/feedback/details/729164/\n *           ie10-dynamic-script-element-fires-loaded-readystate-prematurely\n */\n(function () {\n\n  // Global state.\n  var pendingScripts = {};\n  var scriptCounter = 0;\n\n  /**\n   * Insert script into the DOM\n   *\n   * @param {Object} script Script DOM object\n   * @returns {void}\n   */\n  var _addScript = function (script) {\n    // Get the first script element, we're just going to use it\n    // as a reference for where to insert ours. Do NOT try to do\n    // this just once at the top and then re-use the same script\n    // as a reference later. Some weird loaders *remove* script\n    // elements after the browser has executed their contents,\n    // so the same reference might not have a parentNode later.\n    var firstScript = document.getElementsByTagName(\"script\")[0];\n\n    // Append the script to the DOM, triggering execution.\n    firstScript.parentNode.insertBefore(script, firstScript);\n  };\n\n  /**\n   * Load Script.\n   *\n   * @param {String}            src       URI of script\n   * @param {Function|Object}   callback  (Optional) Called on script load completion,\n   *                                      or options object\n   * @param {Object}            context   (Optional) Callback context (`this`)\n   * @returns {void}\n   */\n  var _lload = function (src, callback, context) {\n    /*eslint max-statements: [2, 32]*/\n    var setup;\n\n    if (callback && typeof callback !== \"function\") {\n      context = callback.context || context;\n      setup = callback.setup;\n      callback = callback.callback;\n    }\n\n    var script = document.createElement(\"script\");\n    var done = false;\n    var err;\n    var _cleanup; // _must_ be set below.\n\n    /**\n     * Final handler for error or completion.\n     *\n     * **Note**: Will only be called _once_.\n     *\n     * @returns {void}\n     */\n    var _finish = function () {\n      // Only call once.\n      if (done) { return; }\n      done = true;\n\n      // Internal cleanup.\n      _cleanup();\n\n      // Callback.\n      if (callback) {\n        callback.call(context, err);\n      }\n    };\n\n    /**\n     * Error handler\n     *\n     * @returns {void}\n     */\n    var _error = function () {\n      err = new Error(src || \"EMPTY\");\n      _finish();\n    };\n\n    if (script.readyState && !(\"async\" in script)) {\n      /*eslint-disable consistent-return*/\n\n      // This section is only for IE<10. Some other old browsers may\n      // satisfy the above condition and enter this branch, but we don't\n      // support those browsers anyway.\n\n      var id = scriptCounter++;\n      var isReady = { loaded: true, complete: true };\n      var inserted = false;\n\n      // Clear out listeners, state.\n      _cleanup = function () {\n        script.onreadystatechange = script.onerror = null;\n        pendingScripts[id] = void 0;\n      };\n\n      // Attach the handler before setting src, otherwise we might\n      // miss events (consider that IE could fire them synchronously\n      // upon setting src, for example).\n      script.onreadystatechange = function () {\n        var firstState = script.readyState;\n\n        // Protect against any errors from state change randomness.\n        if (err) { return; }\n\n        if (!inserted && isReady[firstState]) {\n          inserted = true;\n\n          // Append to DOM.\n          _addScript(script);\n        }\n\n        // --------------------------------------------------------------------\n        //                       GLORIOUS IE8 HACKAGE!!!\n        // --------------------------------------------------------------------\n        //\n        // Oh IE8, how you disappoint. IE8 won't call `script.onerror`, so\n        // we have to resort to drastic measures.\n        // See, e.g. http://www.quirksmode.org/dom/events/error.html#t02\n        //\n        // As with all things development, there's a Stack Overflow comment that\n        // asserts the following combinations of state changes in IE8 indicate a\n        // script load error. And crazily, it seems to work!\n        //\n        // http://stackoverflow.com/a/18840568/741892\n        //\n        // The `script.readyState` transitions we're interested are:\n        //\n        // * If state starts as `loaded`\n        // * Call `script.children`, which _should_ change state to `complete`\n        // * If state is now `loading`, then **we have a load error**\n        //\n        // For the reader's amusement, here is HeadJS's catalog of various\n        // `readyState` transitions in normal operation for IE:\n        // https://github.com/headjs/headjs/blob/master/src/2.0.0/load.js#L379-L419\n        if (firstState === \"loaded\") {\n          // The act of accessing the property should change the script's\n          // `readyState`.\n          //\n          // And, oh yeah, this hack is so hacky-ish we need the following\n          // eslint disable...\n          /*eslint-disable no-unused-expressions*/\n          script.children;\n          /*eslint-enable no-unused-expressions*/\n\n          if (script.readyState === \"loading\") {\n            // State transitions indicate we've hit the load error.\n            //\n            // **Note**: We are not intending to _return_ a value, just have\n            // a shorter short-circuit code path here.\n            return _error();\n          }\n        }\n\n        // It's possible for readyState to be \"complete\" immediately\n        // after we insert (and execute) the script in the branch\n        // above. So check readyState again here and react without\n        // waiting for another onreadystatechange.\n        if (script.readyState === \"complete\") {\n          _finish();\n        }\n      };\n\n      // Onerror handler _may_ work here.\n      script.onerror = _error;\n\n      // Since we're not appending the script to the DOM yet, the\n      // reference to our script element might get garbage collected\n      // when this function ends, without onreadystatechange ever being\n      // fired. This has been witnessed to happen. Adding it to\n      // `pendingScripts` ensures this can't happen.\n      pendingScripts[id] = script;\n\n      // call the setup callback to mutate the script tag\n      if (setup) {\n        setup.call(context, script);\n      }\n\n      // This triggers a request for the script, but its contents won't\n      // be executed until we append it to the DOM.\n      script.src = src;\n\n      // In some cases, the readyState is already \"loaded\" immediately\n      // after setting src. It's a lie! Don't append to the DOM until\n      // the onreadystatechange event says so.\n\n    } else {\n      // This section is for modern browsers, including IE10+.\n\n      // Clear out listeners.\n      _cleanup = function () {\n        script.onload = script.onerror = null;\n      };\n\n      script.onerror = _error;\n      script.onload = _finish;\n      script.async = true;\n      script.charset = \"utf-8\";\n\n      // call the setup callback to mutate the script tag\n      if (setup) {\n        setup.call(context, script);\n      }\n\n      script.src = src;\n\n      // Append to DOM.\n      _addScript(script);\n    }\n  };\n\n  // UMD wrapper.\n  /*global define:false*/\n  if (typeof exports === \"object\" && typeof module === \"object\") {\n    // CommonJS\n    module.exports = _lload;\n\n  } else if (typeof define === \"function\" && define.amd) {\n    // AMD\n    define([], function () { return _lload; });\n\n  } else {\n    // VanillaJS\n    window._lload = _lload;\n  }\n}());\n","// @flow\n\nimport * as React from 'react'\n\ntype Props = {\n  errorText: string,\n  children: React.Node,\n}\n\ntype State = {\n  hasError: boolean,\n}\n\nexport default class ErrorBoundary extends React.Component<Props, State> {\n  state = { hasError: false }\n\n  componentDidCatch() {\n    this.setState({ hasError: true })\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>{this.props.errorText}</h1>\n    }\n    return this.props.children\n  }\n}\n","// @flow\n\nimport React, { Component } from 'react'\nimport load from 'little-loader'\n\nimport ErrorBoundry from './ErrorBoundry'\n\nimport type MapKitType, {\n  FeatureVisibility,\n  MapType,\n  Map,\n  PaddingOptions,\n  Coordinate,\n  CoordinateSpan,\n  MapConstructorOptions,\n  CoordinateRegion,\n  ColorScheme,\n} from 'mapkit'\ndeclare var mapkit: MapKitType\n\ntype NumberTuple = [number, number]\ntype Rect = [number, number, number, number]\ntype PaddingType = number | PaddingOptions\n\ntype Props = {\n  // ⚠️ This prop is used for setup and can't be changed once set.\n  // ⚠️ Pick between callbackUrl or token.\n  // https://developer.apple.com/documentation/mapkitjs/mapkit/2974045-init\n  tokenOrCallback: string,\n\n  // Default View of the Map\n  defaultCenter?: NumberTuple,\n  defaultSpan?: NumberTuple,\n  defaultMapRect?: Rect,\n  defaultRotation?: number,\n\n  // Interaction Properties\n  isRotationEnabled: boolean,\n  isScrollEnabled: boolean,\n  isZoomEnabled: boolean,\n\n  // Should programatic view / rotation changes be animated?\n  animateViewChange: boolean,\n  animateRotationChange: boolean,\n\n  // Configuring the Map's Appearance\n  mapType: MapType,\n  padding: PaddingType,\n  showsCompass: FeatureVisibility,\n  showsMapTypeControl: boolean,\n  showsZoomControl: boolean,\n  showsUserLocationControl: boolean,\n  showsPointsOfInterest: boolean,\n  showsScale: FeatureVisibility,\n  tintColor?: string,\n  colorScheme: ColorScheme,\n\n  // Annotations\n  // todo\n  regionChangeStartEvent?: (event) => void,\n  selectEvent?: (event) => void,\n  mapState?: (state) => void,\n\n  // Overlays\n  // todo\n\n  // TileOverlays\n  // todo\n\n  // Displaying the User's Location\n  showsUserLocation: boolean,\n  tracksUserLocation: boolean,\n\n  children:\n    | React.Node\n    | (({\n        setRotation: (number) => void,\n        setCenter: (NumberTuple) => void,\n      }) => React.Node),\n}\n\ntype State = {\n  mapKitIsReady: boolean,\n}\n\nexport const MapKitContext = React.createContext()\n\nclass MapKit extends Component<Props, State> {\n  mapRef: { current: null | HTMLDivElement }\n  map: Map\n\n  static defaultProps = {\n    mapType: 'standard',\n    colorScheme: 'light',\n    padding: 0,\n    showsCompass: 'adaptive',\n    showsMapTypeControl: true,\n    showsZoomControl: true,\n    showsUserLocationControl: false,\n    showsPointsOfInterest: true,\n    showsScale: 'hidden',\n    animateViewChange: true,\n    isRotationEnabled: true,\n    isScrollEnabled: true,\n    isZoomEnabled: true,\n\n    showsUserLocation: false,\n    tracksUserLocation: false,\n\n    animateRotationChange: true,\n  }\n\n  state = {\n    mapKitIsReady: false,\n  }\n\n  constructor(props: Props) {\n    super(props)\n\n    this.mapRef = React.createRef()\n  }\n\n  initMap = (props: Props) => {\n    const {\n      defaultCenter,\n      defaultMapRect,\n      defaultRotation,\n      defaultSpan,\n      tokenOrCallback,\n      regionChangeStartEvent,\n      selectEvent,\n      mapState,\n    } = props\n    const isCallback = tokenOrCallback.includes('/')\n\n    // init mapkit\n    mapkit.init({\n      authorizationCallback: (done) => {\n        if (isCallback) {\n          fetch(tokenOrCallback)\n            .then((res) => res.text())\n            .then(done)\n        } else {\n          done(tokenOrCallback)\n        }\n      },\n    })\n\n    // Create the 🗺️!\n    if (this.mapRef.current) this.map = new mapkit.Map(this.mapRef.current)\n\n    // Setup Default Map Options\n    // in theory this should be possible to set via the above via:\n    // https://developer.apple.com/documentation/mapkitjs/mapconstructoroptions\n    // but it is not working as expected.\n    //\n    // radar: https://bugreport.apple.com/web/?problemID=41190232\n\n    if (defaultRotation) this.map.rotation = defaultRotation\n\n    if (regionChangeStartEvent) {\n      this.map.addEventListener('region-change-start', (event) => {\n        regionChangeStartEvent(event)\n      })\n    }\n\n    if (selectEvent) {\n      this.map.addEventListener('select', (event) => {\n        selectEvent(event)\n      })\n    }\n\n    if (defaultMapRect) {\n      try {\n        this.map.visibleMapRect = this.createMapRect(\n          defaultMapRect[0],\n          defaultMapRect[1],\n          defaultMapRect[2],\n          defaultMapRect[3],\n        )\n      } catch (e) {\n        console.warn(e.message)\n      }\n    } else {\n      this.buildRegion(defaultCenter, defaultSpan)\n    }\n\n    // Set Other Props\n    this.updateMapProps(props)\n    this.setState({ mapKitIsReady: true })\n\n    if (mapState) {\n      mapState(this.map)\n    }\n  }\n\n  buildRegion = (center: Array, span: Array) => {\n    let mapCenter = this.createCoordinate(0, 0)\n    let mapSpan\n\n    if (center) {\n      try {\n        mapCenter = this.createCoordinate(center[0], center[1])\n      } catch (e) {\n        console.warn(e.message)\n      }\n\n      if (span) {\n        try {\n          mapSpan = this.createCoordinateSpan(span[0], span[1])\n        } catch (e) {\n          console.warn(e.message)\n        }\n      }\n\n      if (mapSpan) {\n        // if we have a span we'll set a region\n        this.map.setRegionAnimated(\n          this.createCoordinateRegion(mapCenter, mapSpan),\n          this.props.animateViewChange,\n        )\n      } else {\n        // otherwise we just set the center\n        this.map.setCenterAnimated(mapCenter, this.props.animateViewChange)\n      }\n    }\n  }\n\n  updateMapProps = (props: Props) => {\n    this.map.showsMapTypeControl = props.showsMapTypeControl\n    this.map.mapType = props.mapType\n    this.map.padding = this.createPadding(props.padding)\n    this.map.showsCompass = props.showsCompass\n    this.map.showsMapTypeControl = props.showsMapTypeControl\n    this.map.showsZoomControl = props.showsZoomControl\n    this.map.showsUserLocationControl = props.showsUserLocationControl\n    this.map.showsPointsOfInterest = props.showsPointsOfInterest\n    this.map.showsScale = props.showsScale\n    this.map.tintColor = props.tintColor\n    this.map.colorScheme = props.colorScheme\n    this.map.isRotationEnabled = props.isRotationEnabled\n    this.map.isScrollEnabled = props.isScrollEnabled\n    this.map.isZoomEnabled = props.isZoomEnabled\n    this.map.showsUserLocation = props.showsUserLocation\n    this.map.tracksUserLocation = props.tracksUserLocation\n    if (props.defaultCenter || props.defaultSpan) {\n      this.buildRegion(props.defaultCenter, props.defaultSpan)\n    }\n    if (props.mapState) {\n      props.mapState(this.map)\n    }\n  }\n\n  createPadding = (padding: PaddingType) => {\n    return new mapkit.Padding(\n      typeof padding === 'number'\n        ? {\n            top: padding,\n            right: padding,\n            bottom: padding,\n            left: padding,\n          }\n        : padding,\n    )\n  }\n\n  createCoordinate = (latitude: number, longitude: number) => {\n    return new mapkit.Coordinate(latitude, longitude)\n  }\n\n  createCoordinateSpan = (latitudeDelta: number, longitudeDelta: number) => {\n    return new mapkit.CoordinateSpan(latitudeDelta, longitudeDelta)\n  }\n\n  createCoordinateRegion = (\n    center: Coordinate,\n    span: CoordinateSpan,\n  ): CoordinateRegion => {\n    return new mapkit.CoordinateRegion(center, span)\n  }\n\n  createMapPoint = (x: number, y: number) => {\n    return new mapkit.MapPoint(x, y)\n  }\n\n  createMapRect = (x: number, y: number, width: number, height: number) => {\n    return new mapkit.MapRect(x, y, width, height)\n  }\n  setRotation = (rotation: number) => {\n    this.map.setRotationAnimated(rotation, this.props.animateRotationChange)\n  }\n\n  setCenter = ([lat, lng]: NumberTuple) => {\n    this.map.setCenterAnimated(\n      this.createCoordinate(lat, lng),\n      this.props.animateViewChange,\n    )\n  }\n\n  setRegion = (center: Coordinate, span: CoordinateSpan) => {\n    this.map.setRegionAnimated(\n      this.createCoordinateRegion(center, span),\n      this.props.animateViewChange,\n    )\n  }\n\n  componentDidMount() {\n    load(\n      'https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js',\n      () => this.initMap(this.props),\n      this,\n    )\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    const { mapKitIsReady } = this.state\n\n    if (mapKitIsReady) {\n      this.updateMapProps(nextProps)\n    }\n\n    return true\n  }\n\n  componentWillUnmount() {\n    if (this.map) {\n      this.map.destroy()\n    }\n  }\n\n  render() {\n    const {\n      tokenOrCallback,\n\n      mapType,\n      padding,\n      showsCompass,\n      showsMapTypeControl,\n      showsZoomControl,\n      showsUserLocationControl,\n      showsPointsOfInterest,\n      showsScale,\n      tintColor,\n      colorScheme,\n\n      defaultCenter,\n      defaultSpan,\n      defaultMapRect,\n      defaultRotation,\n\n      animateViewChange,\n      animateRotationChange,\n\n      isRotationEnabled,\n      isScrollEnabled,\n      isZoomEnabled,\n\n      showsUserLocation,\n      tracksUserLocation,\n\n      children,\n      regionChangeStartEvent,\n      selectEvent,\n      mapState,\n      ...otherProps\n    } = this.props\n    const { mapKitIsReady } = this.state\n\n    return (\n      <div ref={this.mapRef} {...otherProps}>\n        <MapKitContext.Provider value={this.map}>\n          {mapKitIsReady &&\n            (typeof children === 'function'\n              ? children({\n                  setRotation: this.setRotation,\n                  setCenter: this.setCenter,\n                })\n              : children)}\n        </MapKitContext.Provider>\n      </div>\n    )\n  }\n}\n\nexport default MapKit\n","// @flow\n\nimport React, { Component } from 'react'\nimport type MapKitType, {\n  MarkerAnnotationConstructorOptions,\n  Map,\n  Annotation,\n  FeatureVisibility,\n} from 'mapkit'\n\n// mapkit was loaded within `MapKit.js`\ndeclare var mapkit: MapKitType\n\nimport { MapKitContext } from './index'\n\ntype Props = {\n  ...$Exact<MarkerAnnotationConstructorOptions>,\n  map: Map,\n  latitude: number,\n  longitude: number,\n}\n\nclass Marker extends Component<Props> {\n  marker: Annotation\n\n  getMarkerConstructionProps = (props: Props) => {\n    const { map, latitude, longitude, ...otherProps } = props\n\n    return otherProps\n  }\n\n  constructor(props: Props) {\n    super(props)\n\n    const markerProps = this.getMarkerConstructionProps(props)\n\n    this.marker = new mapkit.MarkerAnnotation(\n      new mapkit.Coordinate(props.latitude, props.longitude),\n      markerProps,\n    )\n\n    this.props.map.addAnnotation(this.marker)\n  }\n\n  shouldComponentUpdate(nextProps: Props) {\n    if (\n      this.props.latitude !== nextProps.latitude ||\n      this.props.longitude !== nextProps.longitude\n    ) {\n      this.marker.coordinate = new mapkit.Coordinate(\n        nextProps.latitude,\n        nextProps.longitude,\n      )\n    }\n\n    const markerProps = this.getMarkerConstructionProps(nextProps)\n\n    Object.keys(markerProps).forEach((key) => {\n      this.marker[key] = markerProps[key]\n    })\n\n    return false\n  }\n\n  render() {\n    return null\n  }\n}\n\nexport default (props: Props) => (\n  <MapKitContext.Consumer>\n    {(map) => <Marker {...props} map={map} />}\n  </MapKitContext.Consumer>\n)\n"],"sourceRoot":""}